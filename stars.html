<!doctype html>
<html>
<audio id="beep" src='Resources/beep2.mp3'></audio>
<div style="background-color:Aquamarine;width:640px;">
    <canvas id="gameCanvas" width="640" height="480"></canvas>
</div>
<div style="display:none;">
    <img id="player" src="Resources/sub.png">
    <img id="star" src="Resources/star.png">
</div>
<script>
    var ctx = gameCanvas.getContext("2d");
    var x=[640,640,640,640,640,640,640];
    var y=[0,50,100,200,300,350,400];
    var speed=[-2,-1,-3,-1.5,-2.5,-3.5,-2];
    var playerY=300, changeY=0, score=0;

    var gameTimer=setInterval(mainLoop, 20);
    function mainLoop(){
        ctx.clearRect(0,0,640,480);
        ctx.font='30px Arial';
        ctx.fillText("Score: "+score,10,30);
        for(var n=0;n<7;n++){
            ctx.drawImage(star, x[n], y[n],40,40);
            x[n]+=speed[n];
            checkForHits(n);
            if(x[n]<-80){
                x[n]=640; y[n]=Math.random()*400;
            }
        }
        ctx.drawImage(player,0,playerY,80,80);
        playerY+=changeY;
    }
    document.onkeydown = keyPressed;
    function keyPressed(e){
        var k =e.keyCode;
        if(k==38){changeY=-6;}
        if(k==40){changeY=6;}
    }
    document.onkeyup = keyUp;
    function keyUp(e){
        var k =e.keyCode;
        if(k==38){changeY=0;}
        if(k==40){changeY=0;}
    }
    function checkForHits(n){
        if((Math.abs(x[n])<50)&&
           (Math.abs(playerY-y[n])<50)){
            score+=1;
            x[n]=640; y[n]=Math.random()*400;
            beep.play(); 
        }
    }
    setTimeout(gameOver, 60000);
    function gameOver(){
        clearInterval(gameTimer);
        ctx.font='80px Arial';
        ctx.fillText("Game Over!", 100, 250);
    }
</script>
</html>
